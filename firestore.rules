rules_version='2'

service cloud.firestore {
  match /databases/{database}/documents {
    // Public content (logged out users can read)
    match /publicWorkouts/{workoutId} {
      allow read: if true;
      // Lock down writes from the client (seed via Firebase Console, or adjust if needed)
      allow create, update, delete: if false;
    }

    // Private per-user content (logged-in only)
    match /users/{uid} {
      allow read, write: if request.auth != null && request.auth.uid == uid;

      match /workoutLogs/{logId} {
        allow read, write: if request.auth != null && request.auth.uid == uid;
      }

      // Optional future-proofing
      match /myRecipes/{docId} {
        allow read, write: if request.auth != null && request.auth.uid == uid;
      }
    }
  }
}
